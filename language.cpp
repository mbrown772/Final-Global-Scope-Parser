#include "language.h"

Token::Token(const std::string& tokenId, const std::string& instance, int line)
      : tokenId(tokenId), instance(instance), line(line) {}

Token::Token()
      : tokenId(""), instance(""), line(0) {}


const std::map<char, int> COLMAP = {
  {'e', 0},
  {'g', 1},
  {'l', 2},
  {'t', 3},
  {'.', 4},
  {'~', 5},
  {':', 6},
  {';', 7},
  {'+', 8},
  {'-', 9},
  {'*', 10},
  {'/', 11},
  {'%', 12},
  {'(', 13},
  {')', 14},
  {',', 15},
  {'{', 16},
  {'}', 17},
  {'[', 18},
  {']', 19},
  {'=', 20},
  {'_', 21},
  
  {' ', 22}, {'\n', 22}, {'\t', 22}, {'\r', 22},
  
  {'0', 23}, {'1', 23}, {'2', 23}, {'3', 23}, {'4', 23}, {'5', 23}, {'6', 23}, {'7', 23},
  {'8', 23}, {'9', 23},
  
  // Rest of the lowercase letters
  {'a', 24}, {'b', 24}, {'c', 24}, {'d', 24}, {'f', 24}, {'h', 24}, {'i', 24},
  {'j', 24}, {'k', 24}, {'m', 24}, {'n', 24}, {'o', 24}, {'p', 24}, {'q', 24},
  {'r', 24}, {'s', 24}, {'u', 24}, {'v', 24}, {'w', 24}, {'x', 24}, {'y', 24}, {'z', 24},

  // Uppercase letters
  {'A', 24}, {'B', 24}, {'C', 24}, {'D', 24}, {'E', 24}, {'F', 24}, {'G', 24}, {'H', 24},
  {'I', 24}, {'J', 24}, {'K', 24}, {'L', 24}, {'M', 24}, {'N', 24}, {'O', 24}, {'P', 24},
  {'Q', 24}, {'R', 24}, {'S', 24}, {'T', 24}, {'U', 24}, {'V', 24}, {'W', 24}, {'X', 24},
  {'Y', 24}, {'Z', 24},
  
  {'@', 25}
};

const int STATE_TABLE[STATES][COLCHARS] = {
  {  10,   10,   10,   10,    1,  105,  106,  107,  108,  109,    8,  111,  112,  113,  114,  115,  116,  117,  118,  119,  120, 1001,    0,    9,   10,    0},
  {1002,    5,    2, 1002, 1002, 1002, 1002, 1002, 1002, 1002, 1002, 1002, 1002, 1002, 1002, 1002, 1002, 1002, 1002, 1002, 1002, 1002, 1002, 1002, 1002,    1},
  {   3, 1000, 1000,    4, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000,    2},
  {1000, 1000, 1000, 1000,  101, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000,    3},
  {1000, 1000, 1000, 1000,  102, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000,    4},
  {   6, 1000, 1000,    7, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000,    5},
  {1000, 1000, 1000, 1000,  103, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000,    6},
  {1000, 1000, 1000, 1000,  104, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000,    7},
  {1001, 1001, 1001, 1001, 1001, 1001, 1001, 1001, 1001, 1001,  110, 1001, 1001, 1001, 1001, 1001, 1001, 1001, 1001, 1001, 1001, 1001, 1000, 1001, 1001,    8},
  { 121,  121,  121,  121,  121,  121,  121,  121,  121,  121,  121,  121,  121,  121,  121,  121,  121,  121,  121,  121,  121,  121,  121,    9,  121,    9},
  {  10,   10,   10,   10,  122,  122,  122,  122,  122,  122,  122,  122,  122,  122,  122,  122,  122,  122,  122,  122,  122,   10,  122,   10,   10,   10}
};


const std::map<int, std::string> ERRORS = {
  {1000, "LEXICAL ERROR: Incorrect Operator | Line: "},
  {1001, "LEXICAL ERROR: ID's must start with a letter | Line: "},
  {1002, "LEXICAL ERROR: Period only valid in relational Operators | Line: "},
  {1003, "LEXICAL ERROR: Invalid Character | Line: "},
  {1004, "LEXICAL ERROR: Invalid Comment | Line: "}
};

const std::map<int, std::string> TOKENS = {
  {100, "PERIOD_tk"},
  {101, "LESSEQUAL_tk"},
  {102, "LESSTHAN_tk"},
  {103, "GREATEREQUAL_tk"},
  {104, "GREATERTHAN_tk"},
  {105, "TILDE_tk"},
  {106, "COLON_tk"},
  {107, "SEMICOLON_tk"},
  {108, "PLUS_tk"},
  {109, "MINUS_tk"},
  {110, "ASTERISK_tk"},
  {111, "FORWARDSLASH_tk"},
  {112, "PERCENT_tk"},
  {113, "LEFTPAREN_tk"},
  {114, "RIGHTPAREN_tk"},
  {115, "COMMA_tk"},
  {116, "LEFTCURLY_tk"},
  {117, "RIGHTCURLY_tk"},
  {118, "LEFTBRACKET_tk"},
  {119, "RIGHTBRACKET_tk"},
  {120, "EQUALS_TK"},
  {121, "INT_tk"},
  {122, "ID_tk"}
};

const std::unordered_set<std::string> KEYWORDS = {"start",  "stop", "iterate", "var", "exit", "read", "print", "iff", "then", "set", "func", "program"};
